@using Iceshrimp.Frontend.Localization
@using Iceshrimp.Shared.Schemas.Web
@using Microsoft.Extensions.Localization
@using Iceshrimp.Assets.PhosphorIcons
@using Iceshrimp.Frontend.Core.Services
@inject IStringLocalizer<Localization> Loc;
@inject ApiService                     Api;
@inject NavigationManager NavigationManager;


<div class="follow-request-card">
    <UserProfileCard User="FollowRequest.User" ShowBio="false"></UserProfileCard>
    <div class="buttons">
        <button @onclick="Accept" class="btn accept">
            <Icon Name="Icons.Check"/>
        </button>
        <button @onclick="Reject" class="btn decline">
            <Icon Name="Icons.X"/>
        </button>
    </div>
</div>

@code {
    [Parameter] [EditorRequired] public required FollowRequestResponse FollowRequest { get; set; }
    [Parameter] [EditorRequired] public required EventCallback<string> OnDelete      { get; set; }
    private async void Accept()
    {
        await Api.FollowRequests.AcceptFollowRequest(FollowRequest.Id);
        await OnDelete.InvokeAsync(FollowRequest.Id);
    }

    private async void Reject()
    {
        await Api.FollowRequests.RejectFollowRequest(FollowRequest.Id);
        await OnDelete.InvokeAsync(FollowRequest.Id);
    }
}