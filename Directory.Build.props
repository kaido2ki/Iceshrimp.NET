<Project>
    <!-- Target framework & language version -->
    <PropertyGroup>
        <TargetFramework>net8.0</TargetFramework>
        <LangVersion>latest</LangVersion>
    </PropertyGroup>

    <!-- Common build options -->
    <PropertyGroup>
        <Nullable>enable</Nullable>
        <ImplicitUsings>enable</ImplicitUsings>
        <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
        <InvariantGlobalization>true</InvariantGlobalization>
        <SatelliteResourceLanguages>none</SatelliteResourceLanguages>
        <UseCurrentRuntimeIdentifier>true</UseCurrentRuntimeIdentifier>
    </PropertyGroup>

    <!-- Analyze dependencies for all dependencies, not just direct ones. Remove when upgrading to net90-->
    <PropertyGroup>
        <NuGetAuditMode>all</NuGetAuditMode>
    </PropertyGroup>

    <!-- Except low and medium severity vulnerable dependency warnings from TreatWarningsAsErrors, leaving high and critical severity ones intact -->
    <PropertyGroup>
        <WarningsNotAsErrors>NU1901,NU1902</WarningsNotAsErrors>
    </PropertyGroup>

    <!-- Version metadata -->
    <PropertyGroup>
        <VersionPrefix>2024.1</VersionPrefix>
        <VersionSuffix>beta3</VersionSuffix>
    </PropertyGroup>

    <ItemGroup>
        <AssemblyMetadata Include="codename" Value="phenidate" />
        <AssemblyMetadata Include="edition" Value="enterprise" />
    </ItemGroup>

    <!-- Embed debug info instead of generating PDBs in release configuration -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <DebugType>embedded</DebugType>
    </PropertyGroup>

    <!-- Don't copy blazor debug files to output directory in release configuration -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <BlazorWebAssemblyOmitDebugProxyOutput>true</BlazorWebAssemblyOmitDebugProxyOutput>
        <PreserveCompilationContext>false</PreserveCompilationContext>
    </PropertyGroup>

    <!-- Enable Blazor AOT compilation when EnableAOT build flag is set -->
    <PropertyGroup Condition="'$(EnableAOT)' == 'true'">
        <RunAOTCompilation>true</RunAOTCompilation>
    </PropertyGroup>
</Project>
